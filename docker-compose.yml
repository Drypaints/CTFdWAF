services:
  bunkerweb:
    extends:
      file: compose-bunkerweb.yml
      service: bunkerweb
  
  bw-scheduler:
    extends: 
      file: compose-bunkerweb.yml
      service: bw-scheduler
    depends_on:
      - bunkerweb

  bw-docker:
    extends:
      file: compose-bunkerweb.yml
      service: bw-docker

  bw-autoconf:
    extends:
      file: compose-bunkerweb.yml
      service: bw-autoconf
    depends_on:
      - bunkerweb
      - bw-docker

  bw-ui:
    extends:
      file: compose-bunkerweb.yml
      service: bw-ui
    depends_on:
      - bunkerweb

  bw-db:
    extends:
      file: compose-bunkerweb.yml
      service: bw-db
    depends_on:
      - bunkerweb

networks:
  bw-universe:
    name: bw-universe
    ipam:
      driver: default
      config:
        - subnet: 10.20.30.0/24 # Make sure to set the correct IP range so the scheduler can send the configuration to the instance
  bw-services:
    name: bw-services
  bw-db:
    name: bw-db
  bw-docker:
    name: bw-docker

volumes: # If you want to store the data on a different drive, see https://github.com/nextcloud/all-in-one#how-to-store-the-filesinstallation-on-a-separate-drive
  bw-data:
  bw-storage:
